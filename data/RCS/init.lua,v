head	1.4;
access;
symbols;
locks
	tjaden:1.4; strict;
comment	@# @;


1.4
date	2002.01.22.04.00.51;	author tjaden;	state Exp;
branches;
next	1.3;

1.3
date	2002.01.22.01.49.11;	author tjaden;	state Exp;
branches;
next	1.2;

1.2
date	2002.01.15.10.16.44;	author tjaden;	state Exp;
branches;
next	1.1;

1.1
date	2002.01.12.20.10.34;	author tjaden;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Only run editor-init.lua when actually running the editor.
This allows us to put in editor-specific code in there.
@
text
@-- init.lua


-- path stuff

local load_path = {
    "data",
    "/usr/local/share/redpixel2",
    "/usr/share/redpixel2"
}

local old_store_load = store_load
function store_load (filename, prefix)
    for i,v in load_path do 
	if old_store_load (v.."/"..filename, prefix) then return 1 end
    end
    return nil
end

local old_tiles_load = tiles_load
function tiles_load (filename, prefix)
    for i,v in load_path do 
	if old_tiles_load (v.."/"..filename, prefix) then return 1 end
    end
    return nil
end

local old_lights_load = lights_load
function lights_load (filename, prefix)
    for i,v in load_path do 
	if old_lights_load (v.."/"..filename, prefix) then return 1 end
    end
    return nil
end

local old_dofile = dofile
function dofile (filename)
    for i,v in load_path do 
	if old_dofile (v.."/"..filename) then return 1 end
    end
    return nil
end


-- object type name aliases (long name -> short name)

object_alias = {}
reverse_object_alias = {}

function add_alias (long, short)
    if reverse_object_alias[short] then
	print ("Alias short-name "..short.." already exists, ignoring")
    else
	object_alias[long] = short
	reverse_object_alias[short] = long
    end
end


-- modules to load

local files = {
    "basic/basic-init.lua"
}

for _,filename in files do
    dofile (filename)
end
@


1.3
log
@Added object type aliases.
@
text
@d63 1
a63 2
    "basic/basic-init.lua",
    "editor/editor-init.lua"
@


1.2
log
@Updated to Lua 4.1-work3.
@
text
@d45 15
@


1.1
log
@Initial revision
@
text
@d12 1
d14 2
a15 2
    for i,v in %load_path do 
	if %store_load (v.."/"..filename, prefix) then return 1 end
d20 1
d22 2
a23 2
    for i,v in %load_path do 
	if %tiles_load (v.."/"..filename, prefix) then return 1 end
d28 1
d30 2
a31 2
    for i,v in %load_path do 
	if %lights_load (v.."/"..filename, prefix) then return 1 end
d36 1
d38 2
a39 2
    for i,v in %load_path do 
	if %dofile (v.."/"..filename) then return 1 end
@
