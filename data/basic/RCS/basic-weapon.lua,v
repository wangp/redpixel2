head	1.4;
access;
symbols;
locks; strict;
comment	@# @;


1.4
date	2002.01.15.10.17.18;	author tjaden;	state Exp;
branches;
next	1.3;

1.3
date	2002.01.15.06.07.55;	author tjaden;	state Exp;
branches;
next	1.2;

1.2
date	2002.01.14.02.25.33;	author tjaden;	state Exp;
branches;
next	1.1;

1.1
date	2002.01.12.20.13.22;	author tjaden;	state Exp;
branches;
next	;


desc
@@


1.4
log
@Updated to Lua 4.1-work3.
@
text
@-- basic-weapon.lua


store_load ("basic/basic-weapon.dat", "/basic/weapon/")


----------------------------------------------------------------------
--  Blaster
----------------------------------------------------------------------

Weapon {
    name = "basic-blaster",
    can_fire = function (player)
	return 1
    end,
    fire = function (player)
	spawn_projectile ("basic-blaster-projectile", player, 10)
	player.fire_delay = 5
    end
}

Objtype {
    category = "weapon",
    name = "basic-blaster",
    icon = "/basic/weapon/blaster/pickup",
    nonproxy_init = function (self)
	self:set_collision_flags ("p")
        function self:collide_hook (player)
	    player:receive_weapon ("basic-blaster")
	    self:destroy ()
	end
    end
}

Objtype {
    category = "projectile",
    name = "basic-blaster-projectile",
    icon = "/basic/weapon/blaster/projectile",
    nonproxy_init = function (self)
	function self:collide_hook (obj)
	    obj:receive_damage (10)
	    self:destroy ()
	end
	function self:tile_collide_hook ()
	    self:destroy ()
	end
    end,
    proxy_init = function (self)
	self:rotate_layer (0, radian_to_bangle (self.angle))
    end
}


----------------------------------------------------------------------
--  Bow and arrow
----------------------------------------------------------------------

Objtype {
    category = "weapon",
    name = "basic-bow",
    icon = "/basic/weapon/bow/pickup"
}

Objtype {
    category = "weapon",
    name = "basic-arrow",
    icon = "/basic/weapon/ammo/arrow"
}

Objtype {
    category = "projectile",
    name = "basic-arrow-projectile",
    icon = "/basic/weapon/bow/projectile"
}


----------------------------------------------------------------------
--  Bullet weapons
----------------------------------------------------------------------

Objtype {
    category = "weapon",
    name = "basic-ak",
    icon = "/basic/weapon/ak/pickup"
}

Objtype {
    category = "weapon", 
    name = "basic-minigun", 
    icon = "/basic/weapon/minigun/pickup"
}

Objtype {
    category = "weapon", 
    name = "basic-bullet", 
    icon = "/basic/weapon/ammo/bullet"
}


----------------------------------------------------------------------
--  Rocket weapons
----------------------------------------------------------------------

Objtype {
    category = "weapon", 
    name = "basic-rpg", 
    icon = "/basic/weapon/rpg/pickup"
}

Objtype {
    category = "weapon", 
    name = "basic-rocket", 
    icon = "/basic/weapon/ammo/rocket"
}

Objtype {
    category = "projectile",
    name = "basic-rocket-projectile", 
    icon = "/basic/weapon/rpg/projectile"
}


----------------------------------------------------------------------
--  Shotgun
----------------------------------------------------------------------

Objtype {
    category = "weapon", 
    name = "basic-shotgun", 
    icon = "/basic/weapon/shotgun/pickup"
}

Objtype {
    category = "weapon", 
    name = "basic-shell", 
    icon = "/basic/weapon/ammo/shell"
}


----------------------------------------------------------------------
--  Sniper rifle
----------------------------------------------------------------------

Objtype {
    category = "weapon", 
    name = "basic-rifle", 
    icon = "/basic/weapon/rifle/pickup"
}


----------------------------------------------------------------------
--  Mines
----------------------------------------------------------------------

Objtype {
    category = "weapon", 
    name = "basic-mine", 
    icon = "/basic/weapon/mine/pickup"
}
@


1.3
log
@Removed the light from blaster projectiles (it was just a test).
@
text
@d28 1
a28 1
        function self.collide_hook (self, player)
d40 1
a40 1
	function self.collide_hook (self, obj)
d44 1
a44 1
	function self.tile_collide_hook (self)
@


1.2
log
@Rotate blaster projectile in the angle it is fired
@
text
@a48 1
	self:add_light ("/basic/light/white-16", 0, 0)
@


1.1
log
@Initial revision
@
text
@d50 1
@
