head	1.3;
access;
symbols;
locks
	tjaden:1.3; strict;
comment	@# @;


1.3
date	2002.01.15.10.17.13;	author tjaden;	state Exp;
branches;
next	1.2;

1.2
date	2002.01.14.16.11.29;	author tjaden;	state Exp;
branches;
next	1.1;

1.1
date	2002.01.12.20.13.22;	author tjaden;	state Exp;
branches;
next	;


desc
@@


1.3
log
@Updated to Lua 4.1-work3.
@
text
@-- basic-powerup.lua

store_load ("basic/basic-powerup.dat", "/basic/powerup/")

local make_basic_powerup_init = function (respawn_secs)
    return function (self)
	self:set_collision_flags ("p")
	function self:collide_hook (player)
	    self:hide ()
	    self:set_update_hook (
		1000 * respawn_secs,
		function (self)
		    self:show ()
		    self:remove_update_hook ()
		end
	    )
	end
    end
end

-- enhancements
Objtype {
    category = "item", 
    name = "basic-armour-brown", 
    icon = "/basic/powerup/armour/brown",
    nonproxy_init = make_basic_powerup_init (10)
}

Objtype {
    category = "item", 
    name = "basic-armour-purple", 
    icon = "/basic/powerup/armour/purple",
    nonproxy_init = make_basic_powerup_init (10)
}

Objtype {
    category = "item", 
    name = "basic-armour-blue", 
    icon = "/basic/powerup/armour/blue",
    nonproxy_init = make_basic_powerup_init (10)
}

Objtype {
    category = "item", 
    name = "basic-bloodlust", 
    icon = "/basic/powerup/bloodlust/000",
    nonproxy_init = make_basic_powerup_init (10)
}

Objtype {
    category = "item", 
    name = "basic-cordial", 
    icon = "/basic/powerup/cordial",
    nonproxy_init = make_basic_powerup_init (10)
}

Objtype {
    category = "item",
    name = "basic-lightamp", 
    icon = "/basic/powerup/lightamp/000", 
    nonproxy_init = make_basic_powerup_init (10),
    proxy_init = function (self)
	self:add_light ("/basic/light/blue-16", 0, 0)
    end
}

-- health restoration
Objtype {
    category = "item",
    name = "basic-burger",
    icon = "/basic/powerup/burger",
    nonproxy_init = make_basic_powerup_init (10)
}

Objtype {
    category = "item", 
    name = "basic-chocolate", 
    icon = "/basic/powerup/chocolate",
    nonproxy_init = make_basic_powerup_init (10)
}

Objtype {
    category = "item", 
    name = "basic-joltcola", 
    icon = "/basic/powerup/joltcola",
    nonproxy_init = make_basic_powerup_init (10)
}

Objtype {
    category = "item", 
    name = "basic-medikit", 
    icon = "/basic/powerup/medikit",
    nonproxy_init = make_basic_powerup_init (10)
}

Objtype {
    category = "item", 
    name = "basic-pizza", 
    icon = "/basic/powerup/pizza",
    nonproxy_init = make_basic_powerup_init (10)
}
@


1.2
log
@Used object hidden attribute to implement respawning powerups.
@
text
@d5 1
a5 1
function make_basic_powerup_init (respawn_secs)
a6 1
	local respawn_secs = %respawn_secs
d8 1
a8 1
	function self.collide_hook (self, player)
d11 1
a11 1
		1000 * %respawn_secs,
@


1.1
log
@Initial revision
@
text
@d5 14
a18 4
function basic_powerup_init (self)
    self:set_collision_flags ("p")
    function self.collide_hook (self, player)
	self:destroy (self)
d27 1
a27 1
    nonproxy_init = basic_powerup_init
d34 1
a34 1
    nonproxy_init = basic_powerup_init
d41 1
a41 1
    nonproxy_init = basic_powerup_init
d48 1
a48 1
    nonproxy_init = basic_powerup_init
d55 1
a55 1
    nonproxy_init = basic_powerup_init
d62 1
a62 1
    nonproxy_init = basic_powerup_init,
d73 1
a73 1
    nonproxy_init = basic_powerup_init
d80 1
a80 1
    nonproxy_init = basic_powerup_init
d87 1
a87 1
    nonproxy_init = basic_powerup_init
d94 1
a94 1
    nonproxy_init = basic_powerup_init
d101 1
a101 1
    nonproxy_init = basic_powerup_init
@
